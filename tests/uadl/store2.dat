#
# Make sure that back-to-back dependent store-with-updates work.
#
= asm

	stwu r3,0(r1)
	stwu r3,4(r1)
	stwu r3,4(r1)
	stwu r3,4(r1)
	
= /asm

CORE n=:P

# <GEN>
MD n=Mem ra=0x00000000 d=0x94610000	#	stwu r3,0(r1)
MD n=Mem ra=0x00000004 d=0x94610004	#	stwu r3,4(r1)
MD n=Mem ra=0x00000008 d=0x94610004	#	stwu r3,4(r1)
MD n=Mem ra=0x0000000c d=0x94610004	#	stwu r3,4(r1)
# </GEN>

RD n=NIA     d=0x0

RD n=GPR i=1 d=0x00001000
RD n=GPR i=3 d=0xdeadbeef

MD n=Mem ra=0x0ffc d=0x00000000
MD n=Mem ra=0x1000 d=0x00000000
MD n=Mem ra=0x1004 d=0x00000000
MD n=Mem ra=0x1008 d=0x00000000
MD n=Mem ra=0x100c d=0x00000000
MD n=Mem ra=0x1010 d=0x00000000
MD n=Mem ra=0x1014 d=0x00000000

TRACE


I ea=0x0 id=1
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x94610000
INSTR op=0x94610000					asm="stwu r3,0(r1)"
ITIME t=2
D n=Mem t=write ea=0x1000 nb=4
M n=Mem t=write ea=0x1000 ra=0x1000 d=0xdeadbeef
R n=GPR i=1 d=0x00001000
CTIME t=5

I ea=0x4 id=2
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x94610004
INSTR op=0x94610004					asm="stwu r3,4(r1)"
ITIME t=5
D n=Mem t=write ea=0x1004 nb=4
M n=Mem t=write ea=0x1004 ra=0x1004 d=0xdeadbeef
R n=GPR i=1 d=0x00001004
CTIME t=8

I ea=0x8 id=3
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x94610004
INSTR op=0x94610004					asm="stwu r3,4(r1)"
ITIME t=9
D n=Mem t=write ea=0x1008 nb=4
M n=Mem t=write ea=0x1008 ra=0x1008 d=0xdeadbeef
R n=GPR i=1 d=0x00001008
CTIME t=12

I ea=0xc id=4
M n=Mem t=ifetch ea=0xc ra=0xc d=0x94610004
INSTR op=0x94610004					asm="stwu r3,4(r1)"
ITIME t=12
D n=Mem t=write ea=0x100c nb=4
M n=Mem t=write ea=0x100c ra=0x100c d=0xdeadbeef
R n=GPR i=1 d=0x0000100c
CTIME t=15

I ea=0x10 id=5
M n=Mem t=ifetch ea=0x10 ra=0x10 d=0x00000000
INSTR op=0x00000000					asm="halt "
ITIME t=16
CTIME t=19

RESULTS

RD n=GPR i=0 d=0x00000000
RD n=GPR i=1 d=0x0000100c
RD n=GPR i=2 d=0x00000000
RD n=GPR i=3 d=0xdeadbeef

MD n=Mem ra=0x0000000000000ffc d=0x00000000     #       (0)
MD n=Mem ra=0x0000000000001000 d=0xdeadbeef     #       (3735928559)
MD n=Mem ra=0x0000000000001004 d=0xdeadbeef     #       (3735928559)
MD n=Mem ra=0x0000000000001008 d=0xdeadbeef     #       (3735928559)
MD n=Mem ra=0x000000000000100c d=0xdeadbeef     #       (3735928559)
MD n=Mem ra=0x0000000000001010 d=0x00000000     #       (0)
MD n=Mem ra=0x0000000000001014 d=0x00000000     #       (0)
