#
# This tests the scheduling of multiply (cfx) instructions, in which we
# alternate between threads when scheduling.
#
= asm

	add r1,r1,r10
	add r2,r2,r11
	mullw r3,r1,r2
	mullw r4,r2,r1
	addi r3,r3,1
	addi r4,r4,2

= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x7C215214	#	add r1,r1,r10
MD n=Mem ra=0x00000004 d=0x7C425A14	#	add r2,r2,r11
MD n=Mem ra=0x00000008 d=0x7C6111D6	#	mullw r3,r1,r2
MD n=Mem ra=0x0000000c d=0x7C8209D6	#	mullw r4,r2,r1
MD n=Mem ra=0x00000010 d=0x38630001	#	addi r3,r3,1
MD n=Mem ra=0x00000014 d=0x38840002	#	addi r4,r4,2
# </GEN>

CORE n=:PMT

RD n=TEN d=0xc0000000

CORE n=:PMT:t0

RD n=NIA      d=0x0
RD n=GPR i=10 d=10
RD n=GPR i=11 d=20

CORE n=:PMT:t1

RD n=NIA      d=0x0
RD n=GPR i=10 d=30
RD n=GPR i=11 d=40

TRACE


CORE n=:PMT:t0


I ea=0x0 id=1
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x7c215214
INSTR op=0x7c215214					asm="add r1,r1,r10"
ITIME t=1
R n=GPR i=1 d=0x0000000a
CTIME t=4

I ea=0x4 id=2
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x7c425a14
INSTR op=0x7c425a14					asm="add r2,r2,r11"
ITIME t=1
R n=CfxIndex d=0x00000001
R n=GPR i=2 d=0x00000014
CTIME t=4

CORE n=:PMT:t1


I ea=0x0 id=3
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x7c215214
INSTR op=0x7c215214					asm="add r1,r1,r10"
ITIME t=1
R n=GPR i=1 d=0x0000001e
CTIME t=4

I ea=0x4 id=4
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x7c425a14
INSTR op=0x7c425a14					asm="add r2,r2,r11"
ITIME t=1
R n=GPR i=2 d=0x00000028
CTIME t=4

CORE n=:PMT:t0


I ea=0x8 id=5
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x7c6111d6
INSTR op=0x7c6111d6					asm="mullw r3,r1,r2"
ITIME t=2
R n=GPR i=3 d=0x000000c8
CTIME t=7

CORE n=:PMT:t1


I ea=0x8 id=6
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x7c6111d6
INSTR op=0x7c6111d6					asm="mullw r3,r1,r2"
ITIME t=2
R n=GPR i=3 d=0x000004b0
CTIME t=8

CORE n=:PMT:t0


I ea=0xc id=7
M n=Mem t=ifetch ea=0xc ra=0xc d=0x7c8209d6
INSTR op=0x7c8209d6					asm="mullw r4,r2,r1"
ITIME t=2
R n=GPR i=4 d=0x000000c8
CTIME t=9

I ea=0x10 id=8
M n=Mem t=ifetch ea=0x10 ra=0x10 d=0x38630001
INSTR op=0x38630001					asm="addi r3,r3,1"
ITIME t=3
R n=GPR i=3 d=0x000000c9
CTIME t=9

I ea=0x14 id=9
M n=Mem t=ifetch ea=0x14 ra=0x14 d=0x38840002
INSTR op=0x38840002					asm="addi r4,r4,2"
ITIME t=3
R n=GPR i=4 d=0x000000ca
CTIME t=10

I ea=0x18 id=10
M n=Mem t=ifetch ea=0x18 ra=0x18 d=0x00000000
INSTR op=0x00000000					asm="halt "
ITIME t=4
CTIME t=10

CORE n=:PMT:t1


I ea=0xc id=11
M n=Mem t=ifetch ea=0xc ra=0xc d=0x7c8209d6
INSTR op=0x7c8209d6					asm="mullw r4,r2,r1"
ITIME t=2
R n=GPR i=4 d=0x000004b0
CTIME t=10

I ea=0x10 id=12
M n=Mem t=ifetch ea=0x10 ra=0x10 d=0x38630001
INSTR op=0x38630001					asm="addi r3,r3,1"
ITIME t=3
R n=GPR i=3 d=0x000004b1
CTIME t=10

I ea=0x14 id=13
M n=Mem t=ifetch ea=0x14 ra=0x14 d=0x38840002
INSTR op=0x38840002					asm="addi r4,r4,2"
ITIME t=3
R n=GPR i=4 d=0x000004b2
CTIME t=11

I ea=0x18 id=14
R n=CfxIndex d=0x00000000
M n=Mem t=ifetch ea=0x18 ra=0x18 d=0x00000000
INSTR op=0x00000000					asm="halt "
ITIME t=4
CTIME t=11

RESULTS

CORE n=:PMT:t0

RD n=GPR i=1 d=10
RD n=GPR i=2 d=20
RD n=GPR i=3 d=201
RD n=GPR i=4 d=202

CORE n=:PMT:t1

RD n=GPR i=1 d=30
RD n=GPR i=2 d=40
RD n=GPR i=3 d=1201
RD n=GPR i=4 d=1202
