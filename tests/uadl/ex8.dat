#
# Make sure that we can handle an exception if it occurs during writeback due to
# a register write-hook.
#
= asm

	addi r1,r1,1
	mtspr 303,r1
	addi r2,r2,2
	addi r2,r2,2
	.long 0x0
	addi r10,r10,10

= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x7C2F4BA6	#	mtspr 303,r1
MD n=Mem ra=0x00000008 d=0x38420002	#	addi r2,r2,2
MD n=Mem ra=0x0000000c d=0x38420002	#	addi r2,r2,2
MD n=Mem ra=0x00000010 d=0x00000000	#	.long 0x0
MD n=Mem ra=0x00000014 d=0x394A000A	#	addi r10,r10,10
# </GEN>

CORE n=:P

RD n=NIA d=0x0
RD n=IVOR6 d=0x14

RESULTS

RD n=GPR i=1  d=1
RD n=GPR i=2  d=0
RD n=GPR i=10 d=10
