#
# Make sure that prefetches do not update the CIA, potentially causing errors
# with branches in safe-mode.
#
= asm

	addi r1,r1,1
	addi r2,r2,1
	lwz r4,0x1000(r0)
	b L1
	addi r2,r2,2
L1:
	addi r3,r3,3
	addi r3,r3,3
	
= /asm

CORE n=:P

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x38420001	#	addi r2,r2,1
MD n=Mem ra=0x00000008 d=0x80801000	#	lwz r4,0x1000(r0)
MD n=Mem ra=0x0000000c d=0x48000008	#	b L1
MD n=Mem ra=0x00000010 d=0x38420002	#	addi r2,r2,2
MD n=Mem ra=0x00000014 d=0x38630003	#	addi r3,r3,3
MD n=Mem ra=0x00000018 d=0x38630003	#	addi r3,r3,3
# </GEN>

RD n=NIA d=0x0

MD n=Mem ra=0x1000 d=7

RESULTS

RD n=GPR i=1 d=1
RD n=GPR i=2 d=1
RD n=GPR i=3 d=6
RD n=GPR i=4 d=7


