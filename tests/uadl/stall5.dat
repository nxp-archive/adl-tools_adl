#
# This checks to make sure that instructions will march in lock-step, even if
# the first one can proceed but the second one stalls.
#
= asm

	addi r1,r1,1
	lwz r2,0x1002(r0)
	addi r3,r3,2
	lwz r4,0x1006(r0)
	addi r5,r5,3
	lwz r6,0x100a(r0)

= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x80401002	#	lwz r2,0x1002(r0)
MD n=Mem ra=0x00000008 d=0x38630002	#	addi r3,r3,2
MD n=Mem ra=0x0000000c d=0x80801006	#	lwz r4,0x1006(r0)
MD n=Mem ra=0x00000010 d=0x38A50003	#	addi r5,r5,3
MD n=Mem ra=0x00000014 d=0x80C0100A	#	lwz r6,0x100a(r0)
# </GEN>

CORE n=:P

RD n=NIA    d=0x0

MD n=Mem ra=0x1000 d=0x12345678
MD n=Mem ra=0x1004 d=0x9abcdef0
MD n=Mem ra=0x1008 d=0xdeadbeef
MD n=Mem ra=0x100c d=0x56781234

TRACE



I ea=0x0 id=1
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x38210001
INSTR op=0x38210001					asm="addi r1,r1,1"
ITIME t=1
R n=GPR i=1 d=0x00000001
CTIME t=6

I ea=0x4 id=2
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x80401002
INSTR op=0x80401002					asm="lwz r2,4098(r0)"
ITIME t=1
D n=Mem t=read ea=0x1002 nb=4
M n=Mem t=read ea=0x1000 ra=0x1000 d=0x12345678
M n=Mem t=read ea=0x1004 ra=0x1004 d=0x9abcdef0
R n=GPR i=2 d=0x56789abc
CTIME t=6

I ea=0x8 id=3
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x38630002
INSTR op=0x38630002					asm="addi r3,r3,2"
ITIME t=2
R n=GPR i=3 d=0x00000002
CTIME t=8

I ea=0xc id=4
M n=Mem t=ifetch ea=0xc ra=0xc d=0x80801006
INSTR op=0x80801006					asm="lwz r4,4102(r0)"
ITIME t=2
D n=Mem t=read ea=0x1006 nb=4
M n=Mem t=read ea=0x1004 ra=0x1004 d=0x9abcdef0
M n=Mem t=read ea=0x1008 ra=0x1008 d=0xdeadbeef
R n=GPR i=4 d=0xdef0dead
CTIME t=8

I ea=0x10 id=5
M n=Mem t=ifetch ea=0x10 ra=0x10 d=0x38a50003
INSTR op=0x38a50003					asm="addi r5,r5,3"
ITIME t=3
R n=GPR i=5 d=0x00000003
CTIME t=10

I ea=0x14 id=6
M n=Mem t=ifetch ea=0x14 ra=0x14 d=0x80c0100a
INSTR op=0x80c0100a					asm="lwz r6,4106(r0)"
ITIME t=3
D n=Mem t=read ea=0x100a nb=4
M n=Mem t=read ea=0x1008 ra=0x1008 d=0xdeadbeef
M n=Mem t=read ea=0x100c ra=0x100c d=0x56781234
R n=GPR i=6 d=0xbeef5678
CTIME t=10

I ea=0x18 id=7
M n=Mem t=ifetch ea=0x18 ra=0x18 d=0x00000000
INSTR op=0x00000000					asm="halt "
ITIME t=10
CTIME t=14

RESULTS

RD n=GPR i=1 d=1
RD n=GPR i=2 d=0x56789abc
RD n=GPR i=3 d=2
RD n=GPR i=4 d=0xdef0dead
RD n=GPR i=5 d=3
RD n=GPR i=6 d=0xbeef5678
