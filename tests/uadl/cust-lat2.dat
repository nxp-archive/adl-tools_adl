#
# Tests that we'll obey an exec() with an explicit latency if we
# also have an explicitly allocated stage.
#
= asm

  addi r1,r1,1
  addi r1,r1,1
  addi r1,r1,1
  mtspr 284,r1
  addi r1,r1,1
  addi r1,r1,1
  addi r1,r1,1
  
= /asm

CORE n=:P

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000008 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000000c d=0x7C3C43A6	#	mtspr 284,r1
MD n=Mem ra=0x00000010 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000014 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000018 d=0x38210001	#	addi r1,r1,1
# </GEN>

RD n=NIA d=0x0

TRACE

I ea=0x0 id=1
INSTR op=0x38210001					asm="addi r1,r1,1"
ITIME t=1
CTIME t=4

I ea=0x4 id=2
INSTR op=0x38210001					asm="addi r1,r1,1"
ITIME t=2
CTIME t=5

I ea=0x8 id=3
INSTR op=0x38210001					asm="addi r1,r1,1"
ITIME t=3
CTIME t=6

I ea=0xc id=4
INSTR op=0x7c3c43a6					asm="mtspr TBL,r1"
ITIME t=4
CTIME t=12

I ea=0x10 id=5
INSTR op=0x38210001					asm="addi r1,r1,1"
ITIME t=6
CTIME t=13

I ea=0x14 id=6
INSTR op=0x38210001					asm="addi r1,r1,1"
ITIME t=11
CTIME t=14

I ea=0x18 id=7
INSTR op=0x38210001					asm="addi r1,r1,1"
ITIME t=12
CTIME t=15

I ea=0x1c id=8
INSTR op=0x00000000					asm="halt "
ITIME t=13
CTIME t=16

RESULTS

RD n=GPR i=1 d=6
RD n=TBL d=3
