#
# Test of level-sensitive exceptions.
#
= asm

  addi r1,r1,1
  addi r1,r1,1
  addi r1,r1,1
  addi r1,r1,1
  mtmsr r3
  addi r1,r1,1
  addi r1,r1,1
  mtmsr r4
  addi r1,r1,1
  addi r1,r1,1
  mtmsr r3
  addi r1,r1,1
  addi r1,r1,1
  .long 0
  .long 0
  addi  r31,r31,1
  mfspr r30,SRR0
  addi r30,r30,4
  mtspr SRR0,r30
  rfi

= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000008 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000000c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000010 d=0x7C600124	#	mtmsr r3
MD n=Mem ra=0x00000014 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000018 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000001c d=0x7C800124	#	mtmsr r4
MD n=Mem ra=0x00000020 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000024 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000028 d=0x7C600124	#	mtmsr r3
MD n=Mem ra=0x0000002c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000030 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000034 d=0x00000000	#	.long 0
MD n=Mem ra=0x00000038 d=0x00000000	#	.long 0
MD n=Mem ra=0x0000003c d=0x3BFF0001	#	addi  r31,r31,1
MD n=Mem ra=0x00000040 d=0x7FDA02A6	#	mfspr r30,SRR0
MD n=Mem ra=0x00000044 d=0x3BDE0004	#	addi r30,r30,4
MD n=Mem ra=0x00000048 d=0x7FDA03A6	#	mtspr SRR0,r30
MD n=Mem ra=0x0000004c d=0x4C000064	#	rfi
# </GEN>
CORE n=:P

RD n=GPR i=3 d=0x00008000

RD n=IVOR4 d=0x0000003c

TRACE


I ea=0x0 id=1
R n=FCNT d=0x00000001
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000004
R n=GPR i=1 d=0x00000001
R n=ICNT d=0x00000001

I ea=0x4 id=2
R n=FCNT d=0x00000002
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000008
R n=GPR i=1 d=0x00000002
R n=ICNT d=0x00000002

I ea=0x8 id=3
R n=FCNT d=0x00000003
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x0000000c
R n=GPR i=1 d=0x00000003
R n=ICNT d=0x00000003

I ea=0xc id=4
R n=FCNT d=0x00000004
M n=Mem t=ifetch ea=0xc ra=0xc d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000010
R n=GPR i=1 d=0x00000004
R n=ICNT d=0x00000004

I ea=0x10 id=5
R n=FCNT d=0x00000005
M n=Mem t=ifetch ea=0x10 ra=0x10 d=0x7c600124
INSTR op=0x7c600124					asm="mtmsr 3"
R n=NIA d=0x00000014
R n=MSR d=0x00008000
R n=ICNT d=0x00000005
E n=External
R n=SRR0 d=0x00000010
R n=SRR1 d=0x00008000
R n=MSR d=0x00000000
R n=NIA d=0x0000003c

I ea=0x3c id=6
R n=FCNT d=0x00000006
M n=Mem t=ifetch ea=0x3c ra=0x3c d=0x3bff0001
INSTR op=0x3bff0001					asm="addi 31,31,0x1"
R n=NIA d=0x00000040
R n=GPR i=31 d=0x00000001
R n=ICNT d=0x00000006

I ea=0x40 id=7
R n=FCNT d=0x00000007
M n=Mem t=ifetch ea=0x40 ra=0x40 d=0x7fda02a6
INSTR op=0x7fda02a6					asm="mfspr 30,0x1a"
R n=NIA d=0x00000044
R n=GPR i=30 d=0x00000010
R n=ICNT d=0x00000007

I ea=0x44 id=8
R n=FCNT d=0x00000008
M n=Mem t=ifetch ea=0x44 ra=0x44 d=0x3bde0004
INSTR op=0x3bde0004					asm="addi 30,30,0x4"
R n=NIA d=0x00000048
R n=GPR i=30 d=0x00000014
R n=ICNT d=0x00000008

I ea=0x48 id=9
R n=FCNT d=0x00000009
M n=Mem t=ifetch ea=0x48 ra=0x48 d=0x7fda03a6
INSTR op=0x7fda03a6					asm="mtspr 30,0x1a"
R n=NIA d=0x0000004c
R n=SRR0 d=0x00000014
R n=ICNT d=0x00000009

I ea=0x4c id=10
R n=FCNT d=0x0000000a
M n=Mem t=ifetch ea=0x4c ra=0x4c d=0x4c000064
INSTR op=0x4c000064					asm="rfi 0,0,0"
R n=NIA d=0x00000050
R n=MSR d=0x00008000
R n=NIA d=0x00000014
R n=ICNT d=0x0000000a

I ea=0x14 id=11
R n=FCNT d=0x0000000b
M n=Mem t=ifetch ea=0x14 ra=0x14 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000018
R n=GPR i=1 d=0x00000005
R n=ICNT d=0x0000000b
BP ea=0x18
E n=External
R n=SRR0 d=0x00000014
R n=SRR1 d=0x00008000
R n=MSR d=0x00000000
R n=NIA d=0x0000003c

I ea=0x3c id=12
R n=FCNT d=0x0000000c
M n=Mem t=ifetch ea=0x3c ra=0x3c d=0x3bff0001
INSTR op=0x3bff0001					asm="addi 31,31,0x1"
R n=NIA d=0x00000040
R n=GPR i=31 d=0x00000002
R n=ICNT d=0x0000000c

I ea=0x40 id=13
R n=FCNT d=0x0000000d
M n=Mem t=ifetch ea=0x40 ra=0x40 d=0x7fda02a6
INSTR op=0x7fda02a6					asm="mfspr 30,0x1a"
R n=NIA d=0x00000044
R n=GPR i=30 d=0x00000014
R n=ICNT d=0x0000000d

I ea=0x44 id=14
R n=FCNT d=0x0000000e
M n=Mem t=ifetch ea=0x44 ra=0x44 d=0x3bde0004
INSTR op=0x3bde0004					asm="addi 30,30,0x4"
R n=NIA d=0x00000048
R n=GPR i=30 d=0x00000018
R n=ICNT d=0x0000000e

I ea=0x48 id=15
R n=FCNT d=0x0000000f
M n=Mem t=ifetch ea=0x48 ra=0x48 d=0x7fda03a6
INSTR op=0x7fda03a6					asm="mtspr 30,0x1a"
R n=NIA d=0x0000004c
R n=SRR0 d=0x00000018
R n=ICNT d=0x0000000f

I ea=0x4c id=16
R n=FCNT d=0x00000010
M n=Mem t=ifetch ea=0x4c ra=0x4c d=0x4c000064
INSTR op=0x4c000064					asm="rfi 0,0,0"
R n=NIA d=0x00000050
R n=MSR d=0x00008000
R n=NIA d=0x00000018
R n=ICNT d=0x00000010

I ea=0x18 id=17
R n=FCNT d=0x00000011
M n=Mem t=ifetch ea=0x18 ra=0x18 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x0000001c
R n=GPR i=1 d=0x00000006
R n=ICNT d=0x00000011

I ea=0x1c id=18
R n=FCNT d=0x00000012
M n=Mem t=ifetch ea=0x1c ra=0x1c d=0x7c800124
INSTR op=0x7c800124					asm="mtmsr 4"
R n=NIA d=0x00000020
R n=MSR d=0x00000000
R n=ICNT d=0x00000012
BP ea=0x20

I ea=0x20 id=19
R n=FCNT d=0x00000013
M n=Mem t=ifetch ea=0x20 ra=0x20 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000024
R n=GPR i=1 d=0x00000007
R n=ICNT d=0x00000013

I ea=0x24 id=20
R n=FCNT d=0x00000014
M n=Mem t=ifetch ea=0x24 ra=0x24 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000028
R n=GPR i=1 d=0x00000008
R n=ICNT d=0x00000014

I ea=0x28 id=21
R n=FCNT d=0x00000015
M n=Mem t=ifetch ea=0x28 ra=0x28 d=0x7c600124
INSTR op=0x7c600124					asm="mtmsr 3"
R n=NIA d=0x0000002c
R n=MSR d=0x00008000
R n=ICNT d=0x00000015

I ea=0x2c id=22
R n=FCNT d=0x00000016
M n=Mem t=ifetch ea=0x2c ra=0x2c d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000030
R n=GPR i=1 d=0x00000009
R n=ICNT d=0x00000016

I ea=0x30 id=23
R n=FCNT d=0x00000017
M n=Mem t=ifetch ea=0x30 ra=0x30 d=0x38210001
INSTR op=0x38210001					asm="addi 1,1,0x1"
R n=NIA d=0x00000034
R n=GPR i=1 d=0x0000000a
R n=ICNT d=0x00000017

I ea=0x34 id=24
R n=FCNT d=0x00000018
M n=Mem t=ifetch ea=0x34 ra=0x34 d=0x00000000
INSTR op=0x00000000					asm="halt "
R n=NIA d=0x00000038
R n=ICNT d=0x00000018

RESULTS

RD n=GPR i=1  d=10
RD n=GPR i=31 d=2
