#
# Demonstrates a fetch which results in an exception- a protection fault in this
# case.  Note that there is no protection handler- we just halt when the
# exception is taken.
#
= asm
  addi r1,r1,1
  addi r1,r1,1
  addi r1,r1,1
  addi r1,r1,1
= /asm

= mdopts
 instr-offset: 0x10ff8
= /mdopts

# <GEN>
MD n=Mem ra=0x00010ff8 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00010ffc d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00011000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00011004 d=0x38210001	#	addi r1,r1,1
# </GEN>
CORE n=:P

RD n=GPR i=1 d=0x1fff
RD n=GPR i=4 d=0x2000
RD n=IVOR7 d=0x100
RD n=NIA   d=0xff8

MD n=Mem ra=0xb2000 d=0xdeadbeef
MD n=Mem ra=0xa1004 d=0x12345678

# ea=0x0000 ra=0x10000
TD n=TlbCam set=0 way=0 V=1 TID=0 SIZE=1 TS=0 RPN=0x40 WIMG=0x1 EPN=0x0 SX=1 SR=1 SW=1

# ea=0x1000 ra=0x11000
TD n=TlbCam set=0 way=1 V=1 TID=0 SIZE=1 TS=0 RPN=0x44 WIMG=0x1 EPN=0x4 UX=0 SX=0 SR=1 SW=1

# ea=0x2000 ra=0xB2000
TD n=TlbCam set=0 way=2 V=1 TID=0 SIZE=1 TS=0 RPN=0x2c8 WIMG=0x3 EPN=0x8 SX=1 SR=1 SW=0

RESULTS

RD n=GPR i=2 d=0xdeadbeef
RD n=GPR i=3 d=0xdeaddeee
RD n=GPR i=31 d=2

MD n=Mem ra=0xb2000 d=0xdeadbeef
MD n=Mem ra=0xa1004 d=0xdeaddeee







