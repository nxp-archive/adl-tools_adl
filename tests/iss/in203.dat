#
# Test to make sure that we can pass a type parameter through a hybrid ISS.
#
= asm

	addi r1,r1,1
	addi r1,r1,1
	lwarx r2,r3,r0
	addi r3,r3,4
	addi r2,r2,0x1000
	stwcx. r2,r3,r0
	
= /asm

CORE n=:P

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000008 d=0x7C430028	#	lwarx r2,r3,r0
MD n=Mem ra=0x0000000c d=0x38630004	#	addi r3,r3,4
MD n=Mem ra=0x00000010 d=0x38421000	#	addi r2,r2,0x1000
MD n=Mem ra=0x00000014 d=0x7C43012D	#	stwcx. r2,r3,r0
# </GEN>

RD n=GPR i=3 d=0x1000

RD n=CTR     d=2

MD n=Mem ra=0x1000 d=0xdeadbeef

RESULTS

RD n=GPR i=3 d=0x2
RD n=GPR i=3 d=0x1004
RD n=GPR i=2 d=0xdeadceef

RD n=CTR     d=2
RD n=FOO5_WR d=0x00000001
RD n=XPR i=2 d=0x00001000

MD n=Mem ra=0x0000000000001000 d=0xdeadbeef
MD n=Mem ra=0x0000000000001004 d=0xdeadceef
