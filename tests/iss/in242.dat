#
# Make sure that ThisReg works with a register-file mapped to consecutive
# entries in a sparse register file.
#
= asm

	mtspr 120,r1
	mtspr 121,r2
	mtspr 122,r3
	mtspr 123,r4
	mfspr r5,120
	mfspr r6,121
	mfspr r7,122
	mfspr r8,123
	oris r10,r10,0x4000
	mtspr 70,r10     # Active t1.
	
= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x7C381BA6	#	mtspr 120,r1
MD n=Mem ra=0x00000004 d=0x7C591BA6	#	mtspr 121,r2
MD n=Mem ra=0x00000008 d=0x7C7A1BA6	#	mtspr 122,r3
MD n=Mem ra=0x0000000c d=0x7C9B1BA6	#	mtspr 123,r4
MD n=Mem ra=0x00000010 d=0x7CB81AA6	#	mfspr r5,120
MD n=Mem ra=0x00000014 d=0x7CD91AA6	#	mfspr r6,121
MD n=Mem ra=0x00000018 d=0x7CFA1AA6	#	mfspr r7,122
MD n=Mem ra=0x0000001c d=0x7D1B1AA6	#	mfspr r8,123
MD n=Mem ra=0x00000020 d=0x654A4000	#	oris r10,r10,0x4000
MD n=Mem ra=0x00000024 d=0x7D4613A6	#	mtspr 70,r10     # Active t1.
# </GEN>

CORE n=:PMT:t0

RD n=NIA     d=0x0

RD n=GPR i=1 d=10
RD n=GPR i=2 d=20
RD n=GPR i=3 d=30
RD n=GPR i=4 d=40

CORE n=:PMT:t1

RD n=NIA     d=0x0

RD n=GPR i=1 d=50
RD n=GPR i=2 d=60
RD n=GPR i=3 d=70
RD n=GPR i=4 d=80

RESULTS

CORE n=:PMT:t0

RD n=GPR i=1 d=10
RD n=GPR i=2 d=20
RD n=GPR i=3 d=30
RD n=GPR i=4 d=40
RD n=GPR i=5 d=11
RD n=GPR i=6 d=21
RD n=GPR i=7 d=31
RD n=GPR i=8 d=41

CORE n=:PMT:t1

RD n=GPR i=1 d=50
RD n=GPR i=2 d=60
RD n=GPR i=3 d=70
RD n=GPR i=4 d=80
RD n=GPR i=5 d=51
RD n=GPR i=6 d=61
RD n=GPR i=7 d=71
RD n=GPR i=8 d=81
