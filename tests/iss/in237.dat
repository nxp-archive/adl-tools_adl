#
# Test to make sure that slice-aliases obey the reserved masks of the target
# register.
#
= asm

	ori r1,r1,0xdead
	mtspr 20,r1
	mfspr r2,20
	
= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x6021DEAD	#	ori r1,r1,0xdead
MD n=Mem ra=0x00000004 d=0x7C3403A6	#	mtspr 20,r1
MD n=Mem ra=0x00000008 d=0x7C5402A6	#	mfspr r2,20
# </GEN>

CORE n=:PMT:t0

RD n=NIA d=0x0

TRACE

CORE n=:PMT:t0

I ea=0x0 id=1
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x6021dead
INSTR op=0x6021dead					asm="ori r1,r1,0xdead"
R n=GPR i=1 d=0x0000dead

I ea=0x4 id=2
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x7c3403a6
INSTR op=0x7c3403a6					asm="mtspr XERU,r1"
R n=XER d=0xc0000000

I ea=0x8 id=3
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x7c5402a6
INSTR op=0x7c5402a6					asm="mfspr r2,XERU"
R n=GPR i=2 d=0x0000c000

I ea=0xc id=4
M n=Mem t=ifetch ea=0xc ra=0xc d=0x00000000
INSTR op=0x00000000					asm="halt "

RESULTS

CORE n=:PMT:t0

RD n=NIA d=0x00000010
RD n=XER d=0xc0000000
RD n=GPR i=1 d=0x0000dead
RD n=GPR i=2 d=0x0000c000
