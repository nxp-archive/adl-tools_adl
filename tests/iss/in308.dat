#
# Test the use of split branches with the decode cache.
#
= asm

L1:
	addi	r1,r1,1
	ptb L2
	cmpwi r1,10
	bcctr 0x8,2
	ptb L1
	addi r2,r2,2
	bctr
L2:
	addi r4,r4,4
	addi r4,r4,4
	addi r4,r4,4
	addi r4,r4,4

= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi	r1,r1,1
MD n=Mem ra=0x00000004 d=0x50000018	#	ptb L2
MD n=Mem ra=0x00000008 d=0x2C01000A	#	cmpwi r1,10
MD n=Mem ra=0x0000000c d=0x4D020420	#	bcctr 0x8,2
MD n=Mem ra=0x00000010 d=0x53FFFFF0	#	ptb L1
MD n=Mem ra=0x00000014 d=0x38420002	#	addi r2,r2,2
MD n=Mem ra=0x00000018 d=0x4C000420	#	bctr
MD n=Mem ra=0x0000001c d=0x38840004	#	addi r4,r4,4
MD n=Mem ra=0x00000020 d=0x38840004	#	addi r4,r4,4
MD n=Mem ra=0x00000024 d=0x38840004	#	addi r4,r4,4
MD n=Mem ra=0x00000028 d=0x38840004	#	addi r4,r4,4
# </GEN>

RESULTS

CORE n=:P

RD n=GPR i=1 d=10
RD n=GPR i=2 d=18
RD n=GPR i=3 d=0
RD n=GPR i=4 d=16
