#
# Make sure that slice-set operations obey reserve-masks when using write-hooks
# and that we properly log masks.
#
= asm

	crandc 1,16,31
	crandc 2,1,15

= /asm

RD n=GPR i=1 d=0x0000000012345678
RD n=GPR i=2 d=0x00000000deadbeef

# <GEN>
MD n=Mem ra=0x00000000 d=0x4C30F902	#	crandc 1,16,31
MD n=Mem ra=0x00000004 d=0x4C417902	#	crandc 2,1,15
# </GEN>
CORE n=:P

TRACE

I ea=0x0 id=1
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x4c30f902
INSTR op=0x4c30f902                                     asm="crandc 1,16,31"
R n=NIA d=0x00000004
R n=DReg d=0x0000567800000000 m=0x0000ffff00000000
R n=DReg d=0x0000567800000000 m=0x8000000000000000

I ea=0x4 id=2
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x4c417902
INSTR op=0x4c417902                                     asm="crandc 2,1,15"
R n=NIA d=0x00000008
R n=DReg d=0x1eef567800000000 m=0x7fff000000000000
R n=DReg d=0x9eef567800000000 m=0x8000000000000000

I ea=0x8 id=3
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x00000000
INSTR op=0x00                                   asm="halt "
R n=NIA d=0x00000009

RESULTS

RD n=DReg d=0x9eef567800000000

