#
# This is used for testing breakpoints and the JIT.  We want to make sure that
# breakpoints to the start of a loop (the start of a basic block) work
# correctly.
#
= asm

	addi r1,r1,1
L1:
	addi r2,r2,2
	addi r3,r3,3
	bdnz L1
	addi r4,r4,4

= /asm

#
# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x38420002	#	addi r2,r2,2
MD n=Mem ra=0x00000008 d=0x38630003	#	addi r3,r3,3
MD n=Mem ra=0x0000000c d=0x4200FFF8	#	bdnz L1
MD n=Mem ra=0x00000010 d=0x38840004	#	addi r4,r4,4
# </GEN>

CORE n=:P

RD n=CTR d=20

RESULTS

RD n=GPR i=1 d=0x00000001
RD n=GPR i=2 d=0x00000028
RD n=GPR i=3 d=0x0000003c
RD n=GPR i=4 d=0x00000004
