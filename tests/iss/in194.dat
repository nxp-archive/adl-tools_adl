#
# Tests range checking for non-sparse register files 
# which have non-power-of-2 sizes.
#

= asm

	addi r1,r1,1
	addi r30,r1,1
	addi r1,r30,1
	addi r31,r1,1
	addi r1,r31,1
	addi r10,r10,1
	.long 0x0
	mfspr r28,SRR0
	addi r29,r29,1
	addi r28,r28,4
	mtspr SRR0,r28
	rfi

= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x3BC10001	#	addi r30,r1,1
MD n=Mem ra=0x00000008 d=0x383E0001	#	addi r1,r30,1
MD n=Mem ra=0x0000000c d=0x3BE10001	#	addi r31,r1,1
MD n=Mem ra=0x00000010 d=0x383F0001	#	addi r1,r31,1
MD n=Mem ra=0x00000014 d=0x394A0001	#	addi r10,r10,1
MD n=Mem ra=0x00000018 d=0x00000000	#	.long 0x0
MD n=Mem ra=0x0000001c d=0x7F9A02A6	#	mfspr r28,SRR0
MD n=Mem ra=0x00000020 d=0x3BBD0001	#	addi r29,r29,1
MD n=Mem ra=0x00000024 d=0x3B9C0004	#	addi r28,r28,4
MD n=Mem ra=0x00000028 d=0x7F9A03A6	#	mtspr SRR0,r28
MD n=Mem ra=0x0000002c d=0x4C000064	#	rfi
# </GEN>
CORE n=:P

RD n=NIA     d=0x00000000
RD n=IVOR6   d=0x0000001c

RESULTS

RD n=GPR i=1  d=0x00000001
RD n=GPR i=10 d=0x00000001
RD n=GPR i=29 d=0x00000004
