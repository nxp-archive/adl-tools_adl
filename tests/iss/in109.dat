#
# This tests to make sure that partial writes can be pipelined
# because the only set, during a commit, the part of the register
# that was modified.  So, for example, consecutive CR register updates
# will work properly.
#

= asm

  addic. 2,1,20
  cmpi 1,3,10
  cmpi 2,3,20
  cmpi 3,3,30

= /asm

#
# <GEN>
MD n=Mem ra=0x00000000 d=0x34410014	#	addic. 2,1,20
MD n=Mem ra=0x00000004 d=0x2C83000A	#	cmpi 1,3,10
MD n=Mem ra=0x00000008 d=0x2D030014	#	cmpi 2,3,20
MD n=Mem ra=0x0000000c d=0x2D83001E	#	cmpi 3,3,30
# </GEN>

CORE n=:P

RD n=GPR i=3 d=20

RESULTS




TRACE


I ea=0x0 id=1
R n=FCNT d=0x00000001
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x34410014
R n=NIA d=0x00000004
INSTR op=0x34410014					asm="addic. 2,1,0x14"
ITIME t=0
R n=CR d=0x40000000
R n=ICNT d=0x00000001
R n=GPR i=2 d=0x00000014
CTIME t=3

I ea=0x4 id=2
R n=FCNT d=0x00000002
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x2c83000a
R n=NIA d=0x00000008
INSTR op=0x2c83000a					asm="cmpi 1,3,0xa"
ITIME t=1
R n=CR d=0x44000000
R n=ICNT d=0x00000001
CTIME t=4

I ea=0x8 id=3
R n=FCNT d=0x00000003
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x2d030014
R n=NIA d=0x0000000c
INSTR op=0x2d030014					asm="cmpi 2,3,0x14"
ITIME t=2
R n=CR d=0x44200000
R n=ICNT d=0x00000002
CTIME t=5

I ea=0xc id=4
R n=FCNT d=0x00000004
M n=Mem t=ifetch ea=0xc ra=0xc d=0x2d83001e
R n=NIA d=0x00000010
INSTR op=0x2d83001e					asm="cmpi 3,3,0x1e"
ITIME t=3
R n=CR d=0x44280000
R n=ICNT d=0x00000002
CTIME t=6

I ea=0x10 id=5
R n=FCNT d=0x00000005
M n=Mem t=ifetch ea=0x10 ra=0x10 d=0x00000000
R n=NIA d=0x00000014
INSTR op=0x00000000					asm="halt "
ITIME t=4
R n=ICNT d=0x00000003
CTIME t=7

I ea=0x14 id=6
R n=FCNT d=0x00000006
M n=Mem t=ifetch ea=0x14 ra=0x14 d=0x00000000
R n=NIA d=0x00000018
INSTR op=0x00000000					asm="halt "
ITIME t=5
R n=ICNT d=0x00000003
CTIME t=8

RESULTS

CORE n=:P

RD n=GPR i=2 d=0x00000014
RD n=GPR i=3 d=0x00000014
