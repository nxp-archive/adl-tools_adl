#
# Check the functionality of an array-less tlb.  It's activated when
# HDBCR0.JAMREAL is set to 1.
#
= asm

	lwz r1,0x1000(r0)
	lwz r2,0x1004(r0)
	lis r3,0x4bb0
	mtspr 100,r3
	lwz r4,0x1000(r0)
	lwz r5,0x1004(r0)

= /asm

= mdopts
	instr-offset: 0x10000
= /mdopts

CORE n=:P

#
# <GEN>
MD n=Mem ra=0x00010000 d=0x80201000	#	lwz r1,0x1000(r0)
MD n=Mem ra=0x00010004 d=0x80401004	#	lwz r2,0x1004(r0)
MD n=Mem ra=0x00010008 d=0x3C604BB0	#	lis r3,0x4bb0
MD n=Mem ra=0x0001000c d=0x7C641BA6	#	mtspr 100,r3
MD n=Mem ra=0x00010010 d=0x80801000	#	lwz r4,0x1000(r0)
MD n=Mem ra=0x00010014 d=0x80A01004	#	lwz r5,0x1004(r0)
# </GEN>

# ea=0x000000 ra=0x10000
TD n=TlbCam set=0 way=0 V=1 TID=0 SIZE=1 TS=0 RPN=0x40 WIMG=0x1 SX=1 SR=1 SW=1 EPN=0

# ea=0x001000 ra=0xA1000
TD n=Tlb4k set=1 way=0 V=1 TID=0 SIZE=1 TS=0 RPN=0x284 WIMG=0x2 SX=1 SR=1 SW=1 EPN=0x4

MD n=Mem ra=0xa1000 d=0xdeadbeef
MD n=Mem ra=0xa1004 d=0x12345678

MD n=Mem ra=0xbb001000 d=0x98765432
MD n=Mem ra=0xbb001004 d=0xb0f0babe

TRACE


I ea=0x0 id=1
T n=TlbCam t=instr set=0 way=0 ea=0x0 ra=0x10000  EPN=0x0 RPN=0x40 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x1
M n=Mem t=ifetch ea=0x0 ra=0x10000 d=0x80201000
INSTR op=0x80201000					asm="lwz 1,0,0x1000"
D n=Mem t=read ea=0x1000 nb=4
T n=Tlb4k t=load set=1 way=0 ea=0x1000 ra=0xa1000  NV=0x0 EPN=0x4 RPN=0x284 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x2
M n=Mem t=read ea=0x1000 ra=0xa1000 d=0xdeadbeef
R n=GPR i=1 d=0xdeadbeef

I ea=0x4 id=2
T n=TlbCam t=instr set=0 way=0 ea=0x4 ra=0x10004  EPN=0x0 RPN=0x40 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x1
M n=Mem t=ifetch ea=0x4 ra=0x10004 d=0x80401004
INSTR op=0x80401004					asm="lwz 2,0,0x1004"
D n=Mem t=read ea=0x1004 nb=4
T n=Tlb4k t=load set=1 way=0 ea=0x1004 ra=0xa1004  NV=0x0 EPN=0x4 RPN=0x284 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x2
M n=Mem t=read ea=0x1004 ra=0xa1004 d=0x12345678
R n=GPR i=2 d=0x12345678

I ea=0x8 id=3
T n=TlbCam t=instr set=0 way=0 ea=0x8 ra=0x10008  EPN=0x0 RPN=0x40 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x1
M n=Mem t=ifetch ea=0x8 ra=0x10008 d=0x3c604bb0
INSTR op=0x3c604bb0					asm="addis 3,0,0x4bb0"
R n=GPR i=3 d=0x4bb00000

I ea=0xc id=4
T n=TlbCam t=instr set=0 way=0 ea=0xc ra=0x1000c  EPN=0x0 RPN=0x40 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x1
M n=Mem t=ifetch ea=0xc ra=0x1000c d=0x7c641ba6
INSTR op=0x7c641ba6					asm="mtspr 3,0x064"
R n=HDBCR0 d=0x4bb00000

I ea=0x10 id=5
T n=TlbCam t=instr set=0 way=0 ea=0x10 ra=0x10010  EPN=0x0 RPN=0x40 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x1
M n=Mem t=ifetch ea=0x10 ra=0x10010 d=0x80801000
INSTR op=0x80801000					asm="lwz 4,0,0x1000"
D n=Mem t=read ea=0x1000 nb=4
M n=Mem t=read ea=0x1000 ra=0xbb001000 d=0x98765432
R n=GPR i=4 d=0x98765432

I ea=0x14 id=6
T n=TlbCam t=instr set=0 way=0 ea=0x14 ra=0x10014  EPN=0x0 RPN=0x40 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x1
M n=Mem t=ifetch ea=0x14 ra=0x10014 d=0x80a01004
INSTR op=0x80a01004					asm="lwz 5,0,0x1004"
D n=Mem t=read ea=0x1004 nb=4
M n=Mem t=read ea=0x1004 ra=0xbb001004 d=0xb0f0babe
R n=GPR i=5 d=0xb0f0babe

I ea=0x18 id=7
T n=TlbCam t=instr set=0 way=0 ea=0x18 ra=0x10018  EPN=0x0 RPN=0x40 SIZE=0x1 SR=0x1 SW=0x1 SX=0x1 TID=0x0 TS=0x0 UR=0x0 UW=0x0 UX=0x0 V=0x1 WIMG=0x1
M n=Mem t=ifetch ea=0x18 ra=0x10018 d=0x00000000
INSTR op=0x00					asm="halt "

RESULTS

RD n=GPR i=1 d=0xdeadbeef
RD n=GPR i=2 d=0x12345678
RD n=GPR i=4 d=0x98765432
RD n=GPR i=5 d=0xb0f0babe
