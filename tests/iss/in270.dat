#
# Make sure that with a high-fidelity td model, we check the td count at the end
# of each basic bock, including when the basic block is artificially shortened.
#
# Note:  This test only works when run with --jit-max-bb-size=5.
#
= asm

	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r1,r1,1
	addi r2,r2,2 # Should never get here.

= /asm

#
# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000008 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000000c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000010 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000014 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000018 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000001c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000020 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000024 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000028 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000002c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000030 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000034 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000038 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000003c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000040 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000044 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000048 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000004c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000050 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000054 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000058 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000005c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000060 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000064 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000068 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x0000006c d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000070 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000074 d=0x38210001	#	addi r1,r1,1
MD n=Mem ra=0x00000078 d=0x38420002	#	addi r2,r2,2 # Should never get here.
# </GEN>

CORE n=:P

RD n=NIA d=0x0

RESULTS

RD n=GPR i=1 d=10
RD n=GPR i=2 d=0
