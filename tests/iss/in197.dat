#
# Tests to make sure that we'll emit proper masks even when a register has a
# write-hook.  Note:  We have to do a diff to check this, b/c tracediff
# collapses multiple register entries.
#
= asm

	crand 1,0,0
	crand 2,0,0
	crand 3,1,0
	crand 4,1,0

= /asm

# <GEN>
MD n=Mem ra=0x00000000 d=0x4C200202	#	crand 1,0,0
MD n=Mem ra=0x00000004 d=0x4C400202	#	crand 2,0,0
MD n=Mem ra=0x00000008 d=0x4C610202	#	crand 3,1,0
MD n=Mem ra=0x0000000c d=0x4C810202	#	crand 4,1,0
# </GEN>
CORE n=:P

RD n=GPR i=1 d=0x00000020
RD n=GPR i=2 d=0x00020020
RD n=GPR i=3 d=0x000000c0
RD n=GPR i=4 d=0x0000c070

TRACE


I ea=0x0 id=1
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x4c200202
INSTR op=0x4c200202                                     asm="crand 1,0,0"
R n=DReg d=0x0000000000000020 m=0x00000000ffffffff
R n=DReg d=0x8000000000000020 m=0x8000000000000000
R n=EReg d=0x00000000 m=0xff000000
R n=EReg d=0x00000020 m=0x000000ff


I ea=0x4 id=2
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x4c400202
INSTR op=0x4c400202                                     asm="crand 2,0,0"
R n=DReg d=0x8000000000020020 m=0x00000000ffffffff
R n=DReg d=0x0000000000020020 m=0x8000000000000000
R n=EReg d=0x00000020 m=0xff000000
R n=EReg d=0x00000020 m=0x000000ff

I ea=0x8 id=3
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x4c610202
INSTR op=0x4c610202                                     asm="crand 3,1,0"
R n=DReg d=0x000000c000020020 m=0x1fffffff00000000
R n=DReg d=0x000000c000020020 m=0x8000000000000000
R n=EReg d=0x00000020 m=0xff000000
R n=EReg d=0x000000c0 m=0x000000ff


I ea=0xc id=4
M n=Mem t=ifetch ea=0xc ra=0xc d=0x4c810202
INSTR op=0x4c810202                                     asm="crand 4,1,0"
R n=DReg d=0x0000c07000020020 m=0x1fffffff00000000
R n=DReg d=0x8000c07000020020 m=0x8000000000000000
R n=EReg d=0x000000c0 m=0xff000000
R n=EReg d=0x00000070 m=0x000000ff

I ea=0x10 id=5
M n=Mem t=ifetch ea=0x10 ra=0x10 d=0x00000000
INSTR op=0x00                                   asm="halt "

RESULTS

RD n=DReg d=0x8000c07000020020
RD n=EReg d=0x00000070
RD n=GPR i=0 d=0x0000000000000000
RD n=GPR i=1 d=0x0000000000000020
RD n=GPR i=2 d=0x0000000000020020
RD n=GPR i=3 d=0x00000000000000c0
RD n=GPR i=4 d=0x000000000000c070
