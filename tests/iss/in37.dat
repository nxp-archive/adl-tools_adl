#
# Example with an annulled delayed branch; the
# third branch's delay slot is turned off.
#
= asm
 L0:
  addi r1,r1,1
  bc 20,0,L0
  bc 20,0,L2
  addi r1,r2,1
  addi r1,r3,1
  addi r1,r4,1
 L1:
  addi r2,r2,1
 L2:
  bc 17,0,L1
  addi r3,r3,1
  addi r4,r4,1
  addi r5,r5,1
= /asm

CORE n=:P

# <GEN>
MD n=Mem ra=0x00000000 d=0x38210001	# addi r1,r1,1
MD n=Mem ra=0x00000004 d=0x4280FFFC	# bc 20,0,L0
MD n=Mem ra=0x00000008 d=0x42800014	# bc 20,0,L2
MD n=Mem ra=0x0000000c d=0x38220001	# addi r1,r2,1
MD n=Mem ra=0x00000010 d=0x38230001	# addi r1,r3,1
MD n=Mem ra=0x00000014 d=0x38240001	# addi r1,r4,1
MD n=Mem ra=0x00000018 d=0x38420001	# addi r2,r2,1
MD n=Mem ra=0x0000001c d=0x4220FFFC	# bc 17,0,L1
MD n=Mem ra=0x00000020 d=0x38630001	# addi r3,r3,1
MD n=Mem ra=0x00000024 d=0x38840001	# addi r4,r4,1
MD n=Mem ra=0x00000028 d=0x38A50001	# addi r5,r5,1
# </GEN>

RD n=CTR d=4

TRACE

I id=1 ea=0x0
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x38210001
INSTR op=0x38210001 asm="#1 addi 1,1,1"
R n=GPR i=1 d=0x00000001

I id=2 ea=0x4
M n=Mem t=ifetch ea=0x4 ra=0x4 d=0x4280fffc
INSTR op=0x4280fffc asm="#2 bc 20,0,16383"

I id=3 ea=0x8
M n=Mem t=ifetch ea=0x8 ra=0x8 d=0x42800014
INSTR op=0x42800014 asm="#3 bc 20,0,5"

I id=4 ea=0x0
M n=Mem t=ifetch ea=0x0 ra=0x0 d=0x38210001
INSTR op=0x38210001 asm="#4 addi 1,1,1"
R n=GPR i=1 d=0x00000002

I id=5 ea=0x1c
M n=Mem t=ifetch ea=0x1c ra=0x1c d=0x4220fffc
INSTR op=0x4220fffc asm="#5 bc 17,0,16383"
R n=CTR d=0x00000003

I id=6 ea=0x18
M n=Mem t=ifetch ea=0x18 ra=0x18 d=0x38420001
INSTR op=0x38420001 asm="#6 addi 2,2,1"
R n=GPR i=2 d=0x00000001

I id=7 ea=0x1c
M n=Mem t=ifetch ea=0x1c ra=0x1c d=0x4220fffc
INSTR op=0x4220fffc asm="#7 bc 17,0,16383"
R n=CTR d=0x00000002

I id=8 ea=0x18
M n=Mem t=ifetch ea=0x18 ra=0x18 d=0x38420001
INSTR op=0x38420001 asm="#8 addi 2,2,1"
R n=GPR i=2 d=0x00000002

I id=9 ea=0x1c
M n=Mem t=ifetch ea=0x1c ra=0x1c d=0x4220fffc
INSTR op=0x4220fffc asm="#9 bc 17,0,16383"
R n=CTR d=0x00000001

I id=10 ea=0x18
M n=Mem t=ifetch ea=0x18 ra=0x18 d=0x38420001
INSTR op=0x38420001 asm="#10 addi 2,2,1"
R n=GPR i=2 d=0x00000003

I id=11 ea=0x1c
M n=Mem t=ifetch ea=0x1c ra=0x1c d=0x4220fffc
INSTR op=0x4220fffc asm="#11 bc 17,0,16383"
R n=CTR d=0x00000000

I id=12 ea=0x20
M n=Mem t=ifetch ea=0x20 ra=0x20 d=0x38630001
INSTR op=0x38630001 asm="#12 addi 3,3,1"
R n=GPR i=3 d=0x00000001

I id=13 ea=0x24
M n=Mem t=ifetch ea=0x24 ra=0x24 d=0x38840001
INSTR op=0x38840001 asm="#13 addi 4,4,1"
R n=GPR i=4 d=0x00000001

I id=14 ea=0x28
M n=Mem t=ifetch ea=0x28 ra=0x28 d=0x38a50001
INSTR op=0x38a50001 asm="#14 addi 5,5,1"
R n=GPR i=5 d=0x00000001

I id=15 ea=0x2c
M n=Mem t=ifetch ea=0x2c ra=0x2c d=0x0
INSTR op=0x0 asm="#15 halt"

RESULTS

RD n=CTR d=0x00000000
RD n=GPR i=1 d=0x00000002
RD n=GPR i=2 d=0x00000003
RD n=GPR i=3 d=0x00000001
RD n=GPR i=4 d=0x00000001
RD n=GPR i=5 d=0x00000001
